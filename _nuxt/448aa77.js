(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{346:function(e,t,n){"use strict";n(49);var r=n(7),o=(n(21),{name:"DemoAsyncImage",props:{imageId:{type:Number},size:{type:String,default:"200"},height:{type:String,default:"200"},contain:{type:Boolean,default:!0}},data:function(){return{imageSrc:""}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.imageId){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$axios.$get("/w/image/".concat(e.imageId,"?size=").concat(e.size));case 4:n=t.sent,e.imageSrc=n;case 6:case"end":return t.stop()}}),t)})))()}}),c=n(5),l=n(32),d=n.n(l),m=n(331),h=n(130),v=n(340),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-img",e._g(e._b({attrs:{src:e.imageSrc,height:e.height,contain:e.contain},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"grey darken-5"}})],1)]},proxy:!0}])},"v-img",e.$attrs,!1),e.$listeners),[e._t("default")],2)}),[],!1,null,null,null);t.a=component.exports;d()(component,{VImg:m.a,VProgressCircular:h.a,VRow:v.a})},354:function(e,t,n){e.exports=n.p+"img/store-logo-light.b503660.png"},402:function(e,t,n){"use strict";n(21);var r={name:"AlbumList",props:{members:{type:Array,default:[]}}},o=n(5),c=n(32),l=n.n(c),d=n(375),m=n(341),h=n(357),v=n(130),f=n(340),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.members.length<1?n("h1",[e._v("Loading ... "),n("v-progress-circular",{attrs:{indeterminate:"",color:"grey darken-5"}})],1):n("h1",[e._v("List of Albums")]),n("v-row",e._l(e.members,(function(t,r){return n("v-col",{key:t.id,attrs:{cols:"4"}},[n("v-card",[n("v-card-title",[n("nuxt-link",{attrs:{to:{name:e.$route.path.slice(1),query:{cat:t.title.split(":")[1]}}}},[e._v(e._s(t.title.split(":")[1]))])],1)],1)],1)})),1)],1)}),[],!1,null,null,null),y=component.exports;l()(component,{VCard:d.a,VCardTitle:m.d,VCol:h.a,VProgressCircular:v.a,VRow:f.a});n(49);var w=n(7),k=n(346),C=(n(46),n(4),{name:"PageSettingsCard",components:{"async-img":k.a},props:{title:{type:String,default:"Page Title"},pageId:{type:Number,default:0}},data:function(){return{items:[],searchCategories:"",categories:["Loading ..."],newCategory:"",snackbar:!1,snackMessage:""}},watch:{title:function(e,t){this.getCategories()},searchCategories:function(e){var t=this;e&&(e.length<=2||this.$axios.get("/w/search/category",{params:{term:e}}).then((function(e){var n=e.data.pages.map((function(e){return e.title.split(":")[1]}));t.items=n.map((function(title){return{text:title,value:title}}))})).catch((function(e){console.log(e)})).finally((function(){t.items.filter((function(t){return t.value===e})).length<1&&t.items.push({text:"Add new category: ".concat(e),value:e})})))}},methods:{getCategories:function(){var e=this;e.$axios.get("/w/page/".concat(e.title,"/categories")).then((function(t){e.categories=t.data})).catch((function(e){console.error(e)}))},addNewCategory:function(){var e=this;e.$axios.post("/w/page/".concat(e.title,"/add/category/").concat(e.newCategory),{user:e.$auth.user.email}).then((function(t){switch(t.data.status){case"success":e.categories.push(e.newCategory),e.newCategory="",e.snackMessage="Successfully add category!",e.snackbar=!0;break;case"error":e.snackMessage=t.data.message,e.snackbar=!0}}))},removeCategory:function(e){var t=this;t.$axios.post("/w/page/".concat(t.title,"/del/category/").concat(e),{user:t.$auth.user.email}).then((function(n){switch(console.log(n),n.data.status){case"success":t.categories=t.categories.filter((function(t){return t!==e})),t.snackMessage="Successfully removed category!",t.snackbar=!0;break;case"error":t.snackMessage=n.data.message,t.snackbar=!0}}))}},mounted:function(){this.getCategories()}}),_=n(521),x=n(329),V=n(379),$=n(511),I=n(327),S=n(512),A=n(386),P=n(387),H=n(359),D=Object(o.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-toolbar",{attrs:{flat:"",color:"primary",dark:""}},[n("v-btn",{attrs:{icon:"",dark:""}},[n("v-icon",[e._v("mdi-cog")])],1),n("v-toolbar-title",[e._v("Settings")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$emit("dialog-cancel")}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-card-title",[e._v(e._s(e.title))]),n("v-card-text",{staticClass:"pb-0"},[e.$auth.loggedIn?n("v-autocomplete",{attrs:{items:e.items,"search-input":e.searchCategories,label:"Add new tag",placeholder:"Start typing to search","append-outer-icon":"mdi-tag-plus"},on:{"update:searchInput":function(t){e.searchCategories=t},"update:search-input":function(t){e.searchCategories=t},"click:append-outer":e.addNewCategory},model:{value:e.newCategory,callback:function(t){e.newCategory=t},expression:"newCategory"}}):e._e()],1),n("v-card-subtitle",{staticClass:"pb-0"},[e._v("Existing Tags:")]),n("v-chip-group",{staticClass:"pl-5",attrs:{column:""}},e._l(e.categories,(function(t,r){return n("v-chip",{key:r,attrs:{close:e.$auth.loggedIn,"close-icon":"mdi-delete",color:"teal","text-color":"white",to:{name:"album",query:{cat:t}}},on:{"click:close":function(n){return e.removeCategory(t)}}},[e._v(e._s(t))])})),1),n("v-snackbar",{attrs:{centered:""},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{color:"pink",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",r,!1),[e._v("Close")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.snackMessage))])],1)}),[],!1,null,null,null),M=D.exports;l()(D,{VAutocomplete:_.a,VBtn:x.a,VCard:d.a,VCardSubtitle:m.b,VCardText:m.c,VCardTitle:m.d,VChip:V.a,VChipGroup:$.a,VIcon:I.a,VSnackbar:S.a,VSpacer:A.a,VToolbar:P.a,VToolbarTitle:H.a});var T,j={name:"CarouselsCard",components:{"async-img":k.a,"page-settings-card":M},props:{title:{type:String,default:"Album Title"},members:{type:Array,default:[{id:123}]},imageIndex:{type:Number,default:0}},data:function(){return{carouselsHeaderHeight:50,windowHeight:"900px",cycle:!0,settingsDialog:!1}},mounted:function(){var e=this;e.windowHeight=window.innerHeight-e.carouselsHeaderHeight+"px",e.$nextTick((function(){window.addEventListener("resize",e.onResize)}))},methods:{onResize:function(){this.windowHeight=window.innerHeight-this.carouselsHeaderHeight+"px"},handlePageSettings:(T=Object(w.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.settingsDialog=!0;case 1:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})}},O=n(542),E=n(543),R=n(513),z=n(331),N=n(514),B=Object(o.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-system-bar",{attrs:{flat:"",color:"primary",dark:"",height:e.carouselsHeaderHeight+"px"}},[r("v-img",{attrs:{src:n(354),contain:"","max-width":"80",width:"100%"}}),r("v-toolbar-title",[e._v("Album Carousel: "+e._s(e.title))]),r("v-spacer"),e.cycle?e._e():r("v-btn",{attrs:{icon:"",dark:""},on:{click:e.handlePageSettings}},[r("v-icon",[e._v("mdi-cog")])],1),e.cycle?e._e():r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.cycle=!0}}},[r("v-icon",[e._v("mdi-play")])],1),e.cycle?r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.cycle=!1}}},[r("v-icon",[e._v("mdi-pause")])],1):e._e(),r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.cycle=!1,e.$emit("close-icon-click")}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-carousel",{attrs:{height:"100%",dark:!0,cycle:e.cycle,interval:"6000",progress:!0,"show-arrows-on-hover":""},model:{value:e.imageIndex,callback:function(t){e.imageIndex=t},expression:"imageIndex"}},e._l(e.members,(function(t,n){return r("v-carousel-item",{key:n},[r("async-img",{attrs:{imageId:t.id,size:"2048",height:e.windowHeight}})],1)})),1),r("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.mobile,"max-width":"500"},model:{value:e.settingsDialog,callback:function(t){e.settingsDialog=t},expression:"settingsDialog"}},[r("page-settings-card",{attrs:{pageId:e.members[e.imageIndex].id,title:e.members[e.imageIndex].title},on:{"dialog-cancel":function(t){e.settingsDialog=!1}}})],1)],1)}),[],!1,null,null,null),L=B.exports;l()(B,{VBtn:x.a,VCard:d.a,VCarousel:O.a,VCarouselItem:E.a,VDialog:R.a,VIcon:I.a,VImg:z.a,VSpacer:A.a,VSystemBar:N.a,VToolbarTitle:H.a});var U={name:"AlbumPhotoCard",components:{"async-img":k.a,"page-settings-card":M},props:{member:{type:Object,default:null},index:{type:Number,default:0}},data:function(){return{settingsDialog:!1}}},J=n(477),G=Object(o.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.hover;return[n("v-card",{class:{"on-hover":r},attrs:{elevation:r?16:2}},[n("async-img",{attrs:{imageId:e.member.id,size:"250",height:"250"},on:{click:function(t){return t.stopPropagation(),e.$emit("album-photo-click",e.index)}}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{icon:"",color:"success"},on:{click:function(t){e.settingsDialog=!0}}},[n("v-icon",[e._v("mdi-tag-plus")])],1),n("v-btn",{attrs:{icon:"",color:"indigo"}},[n("v-icon",[e._v("mdi-download")])],1)],1)],1)]}}])}),n("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.mobile,"max-width":"500"},model:{value:e.settingsDialog,callback:function(t){e.settingsDialog=t},expression:"settingsDialog"}},[n("page-settings-card",{attrs:{pageId:e.member.id,title:e.member.title},on:{"dialog-cancel":function(t){e.settingsDialog=!1}}})],1)],1)}),[],!1,null,null,null),F=G.exports;l()(G,{VBtn:x.a,VCard:d.a,VCardActions:m.a,VDialog:R.a,VHover:J.a,VIcon:I.a,VSpacer:A.a});var K={name:"AlbumPhotos",components:{"carousels-card":L,"album-photo-card":F},props:{title:{type:String,default:"Album Title"},members:{type:Array,default:[{id:123}]}},data:function(){return{imageIndex:0,showCarousels:!1}},mounted:function(){},methods:{handleAlbumPhotoClick:function(e){this.imageIndex=e,this.showCarousels=!0}}},Q=Object(o.a)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.title))]),n("v-row",e._l(e.members,(function(t,r){return n("v-col",{key:t.id,staticClass:"d-flex child-flex"},[n("album-photo-card",{attrs:{member:t,index:r},on:{"album-photo-click":e.handleAlbumPhotoClick}})],1)})),1),n("v-dialog",{attrs:{fullscreen:"","hide-overlay":""},model:{value:e.showCarousels,callback:function(t){e.showCarousels=t},expression:"showCarousels"}},[n("carousels-card",{attrs:{title:e.title,members:e.members,imageIndex:e.imageIndex},on:{"close-icon-click":function(t){e.showCarousels=!1}}})],1)],1)}),[],!1,null,"cade1158",null),W=Q.exports;l()(Q,{VCol:h.a,VDialog:R.a,VRow:f.a});var X={name:"AlbumPage",components:{"album-list":y,"album-photos":W},props:{limitPerPage:{type:Number,default:20},authUser:{type:String,default:null}},data:function(){return{members:[],wContinue:null,loading:!1}},watch:{$route:function(e,t){this.members=[],this.wContinue=null,this.loadMembers()}},mounted:function(){this.loadMembers()},updated:function(){this.$vuetify.goTo(document.body.scrollHeight)},methods:{loadMembers:function(){var e=this,option={method:"get",url:e.$route.query&&e.$route.query.cat?"/w/album/"+e.$route.query.cat:"/w/album",params:{limit:e.limitPerPage}};e.authUser&&(option.params.user=e.authUser),e.wContinue&&(option.params.continue=e.wContinue),e.$axios.request(option).then((function(t){null===e.wContinue?e.members=t.data.items:e.members=e.members.concat(t.data.items),e.wContinue=t.data.hasOwnProperty("continue")?t.data.continue:null,e.loading=!1}))},loadMoreMembers:function(){this.loading=!0,this.loadMembers()}},computed:{pageHeight:function(){return document.body.scrollHeight}}},Y=n(356),Z=Object(o.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{ref:"container"},[e.$route.query.cat?n("album-photos",{attrs:{title:e.$route.query.cat,members:e.members}}):n("album-list",{attrs:{members:e.members}}),e.wContinue?n("v-btn",{attrs:{loading:e.loading,disabled:e.loading,block:"",color:"primary"},on:{click:e.loadMoreMembers}},[e._v("Load More")]):e._e()],1)}),[],!1,null,null,null);t.a=Z.exports;l()(Z,{VBtn:x.a,VContainer:Y.a})},523:function(e,t,n){"use strict";n.r(t);var r={name:"UserAlbum",layout:"store",auth:!0,components:{"album-page":n(402).a}},o=n(5),component=Object(o.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("album-page",{attrs:{limitPerPage:20,authUser:this.$auth.user.email}})}),[],!1,null,null,null);t.default=component.exports}}]);